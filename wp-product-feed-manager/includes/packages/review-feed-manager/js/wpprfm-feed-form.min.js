function wpprfm_initializeProductReviewFeedForm(e){jQuery("#wppfm-main-input-map").empty(),wppfm_showWorkingSpinner(),window.location=encodeURI(window.location.href+"&feed-type=google-product-review-feed&feed-name="+e)}function wpprfm_showCategoryAndAttributeMappingWrappers(){jQuery("#category-map").show(),jQuery("#fields-form").show()}function wpprfm_hideCategoryAndAttributeMappingWrappers(){jQuery("#category-map").hide(),jQuery("#wppfm-main-product-filter-wrapper").hide(),jQuery("#fields-form").hide()}function wpprfm_fillFeedFields(e){var r=-1===_feedHolder.feedId,p=e.updateSchedule?e.updateSchedule.split(":"):[];wppfm_setMerchantSelector(r,_feedHolder.channel),wppfm_setGoogleFeedTypeSelector(r,_feedHolder.feedType),jQuery("#wppfm-feed-file-name").val(e.title),jQuery("#wpprfm-aggregator-name").val(e.aggregatorName),jQuery("#wpprfm-publisher-name").val(e.publisherName),jQuery("#wpprfm-publisher-favicon").val(e.publisherFavicon),jQuery("#days-interval").val(p[0]);var d=document.getElementById("update-schedule-hours"),i=document.getElementById("update-schedule-minutes"),t=document.getElementById("update-schedule-frequency");d.value=p[1],i.value=p[2],t.value=p[3]?p[3]:"1",wppfm_setScheduleSelector(p[0],p[3])}function wpprfm_validFIconUrl(e){return""===e||!!wppfm_validateUrl(e)||(alert(wppfm_feed_settings_form_vars.invalid_url),!1)}function wpprfm_fillSourcesList(e){_inputFields=wppfm_woocommerceSourceOptions(),wppfm_addCustomFieldsToInputFields(_inputFields,e),_inputFields.sort(function(e,r){return(""+e.label).toUpperCase()<(""+r.label).toUpperCase()?-1:1})}function wpprfm_initiateReviewFeed(){var e=jQuery("#wppfm-feed-editor-page-data-storage").data("wppfmFeedData");e&&e&&(_reviewFeedHolder=new Feed(e.feed_id,e.feed_file_name,0,0,1,"",e.category_mapping,e.url,"1","US","","",e.feed_title,e.feed_description,e.schedule,[],e.status_id,"2"),_reviewFeedHolder.aggregatorName=e.aggregator_name,_reviewFeedHolder.publisherName=e.publisher_name,_reviewFeedHolder.publisherFavicon=e.publisher_favicon_url,wppfm_constructNewSpecialFeed(_reviewFeedHolder),wpprfm_setDefaultReviewFeedAttributes(JSON.parse(e.attribute_data),e.channel_id,1),_reviewFeedHolder.setFeedFilter(e.feed_filter),_reviewFeedHolder.sourceFields=e.source_fields,_reviewFeedHolder)}function wpprfm_initiateSaveAndGenerateReviewFeed(){wppfm_showWorkingSpinner(),wppfm_showInfoMessage(wppfm_feed_settings_form_vars.feed_preparing+' <span class="wppfm-processing-dots"></span>'),wppfm_hideWorkingSpinner(),wppfm_disableFeedActionButtons("google-product-review-feed"),wppfm_saveFeedToDb(_reviewFeedHolder,function(e){wpprfm_handleSaveReviewFeedToDbResult(e,-1===_reviewFeedHolder.feedId),wppfm_updateFeedFile(_reviewFeedHolder.feedId,function(e){wppfm_handleUpdateFeedFileActionResult(e),wppfm_hideWorkingSpinner()})})}function wpprfm_handleSaveReviewFeedToDbResult(e,r){0===e||"0"===e?wppfm_handleSaveFeedToDbFailedAction():(_reviewFeedHolder.feedId=e,r&&(wppfm_resetUrlForNewFeed(_reviewFeedHolder.feedId,"google-product-review-feed"),wppfm_storeFeedUrlInSourceData(_reviewFeedHolder.url)))}jQuery(function(){var e=wppfm_getUrlParameter("id"),r=wppfm_getUrlParameter("feed-name"),p=wppfm_getUrlParameter("feed-type");"google-product-review-feed"===p&&(wppfm_showWorkingSpinner(),""!==e?(wpprfm_initiateReviewFeed(),wpprfm_editExistingReviewFeed(e)):""!==r&&""!==p&&(jQuery("#wppfm-feed-file-name").val(r),wppfm_setMerchantSelector(!1,"1"),wppfm_setGoogleFeedTypeSelector(!1,"2")),jQuery("#wppfm-feed-types-list-row").show(),jQuery("#wppfm-feed-types-selector").prop("disabled",!1).val("2"),wppfm_hideWorkingSpinner())});