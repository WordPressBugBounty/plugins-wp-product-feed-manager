function wppfm_activateFeedCategoryMapping(e){var t=jQuery("#feed-selector-"+e),a=t.attr("data-children")?JSON.parse(t.attr("data-children")):[];t.prop("checked",!0),wppfm_activateFeedCategorySelector(e);for(var p=0;p<a.length;p++)wppfm_activateFeedCategorySelector(a[p])}function wppfm_activateFeedCategorySelection(e){var t=jQuery("#feed-selector-"+e),a=t.attr("data-children")?JSON.parse(t.attr("data-children")):[];t.prop("checked",!0),_feedHolder.activateCategory(e,!0);for(var p=0;p<a.length;p++)wppfm_activateFeedCategorySelection(a[p])}function wppfm_activateAllFeedCategoryMapping(){for(var e=0!==document.getElementsByClassName("wppfm-category-mapping-selector").length?"category_mapping_table":"category_selection_table",t="category_mapping_table"===e?document.getElementsByClassName("wppfm-category-mapping-selector"):document.getElementsByClassName("wppfm-category-selector"),a=0;a<t.length;a++)"category_mapping_table"===e?wppfm_activateFeedCategorySelector(t[a].value):wppfm_activateFeedCategorySelection(t[a].value)}function wppfm_activateGoogleAnalyticsTrackingInputs(e=!0){if(e){jQuery(".wppfm-google-analytics-wrapper").show(),jQuery(".wppfm-google-analytics-input-wrapper").show();var t=jQuery("#wppfm-google-utm-campaign");""===t.val()&&""!==_feedHolder.title&&(t.val(_feedHolder.title),wppfm_setGoogleUtmCampaign(_feedHolder.title)),_feedHolder.utmSource||jQuery("#wppfm-google-utm-source").val("Google Shopping"),_feedHolder.utmMedium||jQuery("#wppfm-google-utm-medium").val("CPC"),wppfm_fillFeedHolderWithGoogleAnalyticsTrackingData()}else jQuery(".wppfm-google-analytics-wrapper").hide(),jQuery(".wppfm-google-analytics-input-wrapper").hide()}function wppfm_activateFeedCategorySelector(e){var t=wppfm_channelUsesOwnCategories(_feedHolder.channel),a=t?"shopCategory":"default",p=jQuery("#feed-selector-"+e),o=jQuery("#feed-category-"+e);_feedHolder.activateCategory(e,t);var r=p.attr("data-children")?JSON.parse(p.attr("data-children")):[];""===o.html()&&o.html(wppfm_mapToDefaultCategoryElement(e,a)),p.prop("checked",!0);for(var n=0;n<r.length;n++)wppfm_activateFeedCategorySelector(r[n])}function wppfm_deactivateFeedCategorySelection(e){var t=jQuery("#feed-selector-"+e),a=t.attr("data-children")?JSON.parse(t.attr("data-children")):[];t.prop("checked",!1),_feedHolder.deactivateCategory(e);for(var p=0;p<a.length;p++)wppfm_deactivateFeedCategorySelection(a[p])}function wppfm_deactivateFeedCategoryMapping(e){var t=jQuery("#feed-selector-"+e);wppfm_deactivateFeedCategorySelector(e,!0);for(var a=t.attr("data-children")?JSON.parse(t.attr("data-children")):[],p=0;p<a.length;p++)wppfm_deactivateFeedCategorySelector(a[p],!1)}function wppfm_deactivateAllFeedCategoryMapping(){for(var e=0!==document.getElementsByClassName("wppfm-category-mapping-selector").length?document.getElementsByClassName("wppfm-category-mapping-selector"):document.getElementsByClassName("wppfm-category-selector"),t=0;t<e.length;t++)wppfm_deactivateFeedCategorySelector(e[t].value,!1)}function wppfm_contains_special_characters(e){for(var t=0;t<19;t++)if(e.indexOf("%^#<>\\{}[]/~`@?:;=&"[t])>-1)return!0;return!1}function wppfm_deactivateFeedCategorySelector(e,t){var a=jQuery("#feed-selector-"+e);if(_feedHolder.deactivateCategory(e),jQuery("#feed-category-"+e).html(""),jQuery("#category-selector-catmap-"+e).hide(),a.prop("checked",!1),!t)for(var p=a.attr("data-children")?JSON.parse(a.attr("data-children")):[],o=0;o<p.length;o++)wppfm_deactivateFeedCategorySelector(p[o],!1)}function wppfm_hideSubs(e){for(var t=e.match(/(\d+)$/)[0],a=e.substring(0,e.length-t.length),p=7;p>t;p--){var o=jQuery("#"+a+p);o.css("display","none"),o.empty()}}function wppfm_escapeHtml(e){return(e=(e=e||"").replace(/&([^#])(?![a-z1-4]{1,8};)/gi,"&#038;$1")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function wppfm_sanitizeInputString(e){return e.trim().replace(/[<>:"\/\\|?*]/g,"_")}function wppfm_sanitizeEmail(e){return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())&&e}function wppfm_splitCombinedFieldElements(e){if(!e)return[];for(var t,a=/\|[0-9]/,p=[];null!==(t=a.exec(e));){var o=t.index;p.push(e.substring(0,o)),e=e.slice(o+1)}return p.push(e),p}function wppfm_showWorkingSpinner(){jQuery("#wppfm-working-spinner").show(),jQuery("body").css("cursor","wait")}function wppfm_hideWorkingSpinner(){jQuery("#wppfm-working-spinner").hide(),jQuery("body").css("cursor","default")}function wppfm_getButtonIds(e){return"google-product-review-feed"===e||"google-merchant-promotions-feed"===e?"google-product-review-feed"===e?{generate:"wpprfm-generate-review-feed-button",save:"wpprfm-save-review-feed-button"}:{generate:"wpppfm-generate-merchant-promotions-feed-button",save:"wpppfm-save-merchant-promotions-feed-button"}:{generate:"wppfm-generate-feed-button",save:"wppfm-save-feed-button"}}function wppfm_enableFeedActionButtons(e="product-feed"){let t=wppfm_getButtonIds(e);jQuery(`#${t.generate}-top`).removeClass("wppfm-disabled-button").blur(),jQuery(`#${t.generate}-bottom`).removeClass("wppfm-disabled-button").blur(),jQuery(`#${t.save}-top`).removeClass("wppfm-disabled-button").blur(),jQuery(`#${t.save}-bottom`).removeClass("wppfm-disabled-button").blur(),""!==jQuery("#wppfm-feed-editor-page-data-storage").data("wppfmFeedUrl")&&wppfm_enableViewFeedButtons()}function wppfm_disableFeedActionButtons(e="product-feed"){let t=wppfm_getButtonIds(e);jQuery(`#${t.generate}-top`).addClass("wppfm-disabled-button"),jQuery(`#${t.generate}-bottom`).addClass("wppfm-disabled-button"),jQuery(`#${t.save}-top`).addClass("wppfm-disabled-button"),jQuery(`#${t.save}-bottom`).addClass("wppfm-disabled-button"),wppfm_disableViewFeedButtons()}function wppfm_enableViewFeedButtons(){jQuery("#wppfm-view-feed-button-top").removeClass("wppfm-disabled-button").blur(),jQuery("#wppfm-view-feed-button-bottom").removeClass("wppfm-disabled-button").blur()}function wppfm_disableViewFeedButtons(){jQuery("#wppfm-view-feed-button-top").addClass("wppfm-disabled-button"),jQuery("#wppfm-view-feed-button-bottom").addClass("wppfm-disabled-button")}function wppfm_convertDtInputDateTimeToIsoDateTime(e){const t=e.split(" "),a=t[0].split("-"),p=t[1].split(":");return new Date(a[2],a[1],a[0],p[0],p[1]).toISOString()}function wppfm_convertIsoDateTimeToDtInputDateTime(e){const t=new Date(e);return`${t.getDate()}-${t.getMonth()}-${t.getFullYear()} ${(t.getHours()<10?"0":"")+t.getHours()}:${(t.getMinutes()<10?"0":"")+t.getMinutes()}`}function wppfm_showErrorMessage(e){wppfm_hideAdminNotices();var t=jQuery("#wppfm-error-message");t.empty(),t.append("<p>"+e+"</p>"),t.show()}function wppfm_showInfoMessage(e){wppfm_hideAdminNotices();var t=jQuery("#wppfm-info-message");t.empty(),t.append("<p>"+e+"</p>"),t.show()}function wppfm_showSuccessMessage(e){wppfm_hideAdminNotices();var t=jQuery("#wppfm-success-message");t.empty(),t.append("<p>"+e+"</p>"),t.show()}function wppfm_showWarningMessage(e){wppfm_hideAdminNotices();var t=jQuery("#wppfm-warning-message");t.empty(),t.append("<p>"+e+"</p>"),t.show()}function wppfm_hideAdminNotices(){jQuery("#wppfm-error-message").hide(),jQuery("#wppfm-info-message").hide(),jQuery("#wppfm-success-message").hide(),jQuery("#wppfm-warning-message").hide()}function wppfm_showChannelInfoPopup(e){var t=jQuery("#wppfm-"+e+"-channel-data"),a=t.data("channel-name"),p=t.data("status"),o=t.data("installed-version"),r=t.data("version"),n=t.data("info-link"),i=t.data("specifications-link"),s=jQuery("#wppfm-channel-info-popup__installed-version"),l=jQuery("#wppfm-channel-info-popup__info-link"),d=jQuery("#wppfm-channel-info-popup__feed-specifications-link");jQuery("#wppfm-channel-info-popup__name").html(a),jQuery("#wppfm-channel-info-popup__status").html("Status: "+p),"installed"===p?(s.html("Installed version: "+o),s.show()):s.hide(),jQuery("#wppfm-channel-info-popup__latest-version").html("Latest version: "+r),""!==n?(l.html('<a id="wppfm-channel-info-popup-feed-info-link" href="'+n+'" target="_blank">More about selling on this channel</a>'),l.show()):l.hide(),""!==i?(d.html('<a id="wppfm-channel-info-popup-feed-specifications-link" href="'+i+'" target="_blank">Channels feed specifications</a>'),d.show()):d.hide(),jQuery("#wppfm-channel-info-popup").show()}