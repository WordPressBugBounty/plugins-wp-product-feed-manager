jQuery(function(){const e=btoa("listing_manager:rxgbwedYS0XqF1AvkHNPbC06"),p="https://wpmarketingrobot.com/wp-json/fluent-crm/v2/subscribers/";function n(e){wppfm_showErrorMessage(wppfm_support_form_vars.signup_failed),JSON.parse(e.responseText),wppfm_hideWorkingSpinner()}jQuery("#wppfm-sign-up-button").on("click",function(){let t=jQuery("#wppfm-sign-up-mail-input").val();const a=function(){const e=jQuery("#wppfm-support-page-data-storage"),p=e.data("wppfmUsername");return{username:p,firstName:e.data("wppfmUserFistName")||p,lastName:e.data("wppfmUserLastName")||p}}();t=wppfm_sanitizeEmail(t),t?function(t,a){wppfm_showWorkingSpinner();let i={first_name:t.firstName,last_name:t.lastName,email:a,status:"subscribed",tags:[1,11],lists:[6]};jQuery.ajax({method:"POST",url:p,data:i,headers:{Authorization:"Basic "+e}}).done(function(){jQuery("#wppfm-google-shopping-checklist-popup").show(),wppfm_hideWorkingSpinner()}).fail(function(t){!function(t,a){let i=JSON.parse(t.responseText),s=i.hasOwnProperty("email")?i.email:null;s&&s.hasOwnProperty("unique")?function(n){let t={get_by_email:n};return new Promise((n,a)=>{jQuery.ajax({method:"GET",url:`${p}0`,data:t,headers:{Authorization:"Basic "+e}}).done(function(e){n(e.subscriber.id)}).fail(function(e){a(e)})})}(a).then(t=>{(function(n){let t={attach_tags:[11]};return new Promise((a,i)=>{jQuery.ajax({method:"PUT",url:`${p}${n}/`,data:t,headers:{Authorization:"Basic "+e}}).done(function(e){a(e)}).fail(function(e){i(e)})})})(t).then(e=>{"Subscriber successfully updated"===e.message?(jQuery("#wppfm-google-shopping-checklist-popup").show(),wppfm_hideWorkingSpinner()):n(e)})}).catch(e=>{n(e)}):n(t)}(t,a)})}(a,t):wppfm_showErrorMessage(wppfm_support_form_vars.email_not_valid)}),jQuery(".wppfm-popup__close-button").on("click",function(){jQuery("#wppfm-channel-info-popup").hide(),jQuery("#wppfm-google-shopping-checklist-popup").hide()}),jQuery("#wppfm-accept-eula").on("change",function(){jQuery(this).is(":checked")?jQuery("#wppfm-license-activate").prop("disabled",!1):jQuery("#wppfm-license-activate").prop("disabled",!0)})});