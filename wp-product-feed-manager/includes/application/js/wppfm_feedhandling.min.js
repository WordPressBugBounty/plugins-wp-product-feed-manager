var _feedHolder;function wppfm_getFeedAttributes(e,t,r,a){wppfm_getOutputFields(e,t,r,function(e){a("0"!==e?JSON.parse(e):[])})}function wppfm_customSourceFields(e,t){wppfm_getSourceFields(e,function(e){t("error"!==e?JSON.parse(e):"0")})}function wppfm_mainFeedFilters(e,t){wppfm_getMainFeedFilters(e,function(e){t("0"!==e?JSON.parse(e):null)})}function wppfm_addFeedAttributes(e,t){var r=wppfm_getAdvisedInputs(t),a=0;for(var p in _feedHolder.clearAllAttributes(),e){var d=e[p].field_label,o=!0;(parseInt(e[p].category_id)>2&&""===e[p].value||"0"===e[p].category_id||parseInt(e[p].category_id)>2&&void 0===e[p].value)&&(o=!1),wppfm_setChannelRelatedPresets(e[p],t),_feedHolder.addAttribute(a,d,r[d],e[p].value,e[p].category_id,o,0,0,0),a++}}function wppfm_saveFeedToDb(e,t){_feedHolder=e;var r=wppfm_getFeedDataToStore(jQuery("#wppfm-feed-editor-page-data-storage").data("wppfmAjaxFeedDataToDatabaseConversionArray")),a="3"!==_feedHolder.feedType&&_feedHolder.promotions?wppfm_filterActiveMetaData(_feedHolder.attributes,_feedHolder.categoryMapping):wpppfm_convertPromotionToAttribute(_feedHolder.promotions),p=_feedHolder.feedFilter;wppfm_updateFeedToDb(r,a,p,function(e){t(e.trim())})}function wppfm_filterActiveMetaData(e,t){for(var r=[],a=0;a<e.length;a++)void 0!==e[a].value&&""!==e[a].value&&!0===e[a].isActive&&r.push(new Wppfm_AttributeMeta(e[a].fieldName,e[a].value));return t.length>0&&r.push(new Wppfm_AttributeMeta("category_mapping",t)),r}function wppfm_getFeedDataToStore(e){for(var t=[],r=0;r<e.length;r++){var a={name:e[r].db,value:void 0!==_feedHolder[e[r].feed]?_feedHolder[e[r].feed]:"",type:e[r].type};t.push(a)}return t}function wppfm_getFileNameFromForm(){var e=jQuery("#wppfm-feed-file-name");return!1===wppfm_validateFileName(e.val())&&e.val(""),e.val()}function wppfm_standardProductFeedSelected(){wppfm_initializeStandardProductFeedForm(wppfm_getFileNameFromForm())}