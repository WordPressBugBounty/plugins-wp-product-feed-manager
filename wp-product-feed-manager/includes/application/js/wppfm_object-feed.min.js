function Feed(t,e,i,r,a,s,u,o,n,h,l,c,d,v,g,m,b,p,f=0,y="",C="",V="",A="",S="",O="",F=""){this.feedId=t,this.title=e,this.mainCategory=s,this.categoryMapping=u,this.includeVariations=i,this.isAggregator=r,this.feedTitle=d,this.feedDescription=v,this.url=o,this.dataSource=n,this.channel=a,this.country=3!==a?h:"NL",this.language=l,this.currency=c,this.status=b,this.updateSchedule=g,this.feedFilter=m,this.attributes=[],this.promotions=[],this.feedType=p,this.googleAnalytics=f,this.utmSource=C,this.utmId=y,this.utmMedium=V,this.utmCampaign=A,this.utmSourcePlatform=S,this.utmTerm=O,this.utmContent=F,this.addAttribute=addAttributeToFeed,this.getAttributeIdByName=getAttributeId,this.activateAttribute=activateFeedsAttribute,this.checkIfCustomNameExists=checkCustomName,this.countCombinedFields=countAttributesCombinedFields,this.deactivateAttribute=deactivateFeedsAttribute,this.deactivateCategory=deactivateCategoryMap,this.activateCategory=activateCategoryMap,this.setStaticAttributeValue=setAttributesStaticValue,this.setSourceValue=setAttributesSourceValue,this.setAlternativeSourceValue=setAlternativeAttributesSourceValue,this.setCombinedOutputValue=setAttributesCombinedOutputValue,this.setCategoryValue=setAttributesCategoryValue,this.setFeedFilter=setFeedFilterValue,this.setPromotionInputValue=setPromotionInputValue,this.setPromotionSelectValue=setPromotionSelectValue,this.mapCategory=mapACategory,this.changeCustomFeedCategoryMap=changeCustomCategoryMap,this.changeIncludeVariations=changeIncludeVariationsValue,this.changeAggregator=changeAggregatorValue,this.changeGoogleAnalyticsSelection=changeGoogleAnalyticsSelection,this.resetNrQueries=rstNrQueries,this.incrNrQueries=addNrQueries,this.decrNrQueries=substrNrQueries,this.addConditionValue=addAttributesCondition,this.addValueQueryValue=addAttributesValueQuery,this.removeAttribute=removeAttributeFromFeed,this.removeValueConditionValue=removeAttributesCondition,this.removeValueQueryValue=removeAttributesValueQuery,this.removeAlternativeSourceValue=removeAlternativeSource,this.removeCombinedOutputValue=removeAttributesCombinedOutputValue,this.removeEditValueValue=removeAttributesEditValue,this.removeFeedFilter=removeFeedFilterValue,this.getAttributesQueriesObject=getAttributesQueries,this.getCombinedOutputValue=getAttributesCombinedOutputValue,this.getValueQueryValue=getAttributesValueQueries,this.getAttributesSourceObject=getAttributesSources,this.getSourceObject=getSourceData,this.getAlternativeSourcesObject=getAlternativeSources,this.getAttributesValueObject=getAttributesValues,this.getFeedFilter=getFeedFilterValue,this.getFeedType=getFeedType,this.setMainCategory=setCategories,this.setUpdateSchedule=setSchedule,this.setCustomCategory=setFeedCustomCategory,this.setCountry=changeCountry,this.clearSourceValue=clearAttributesSourceValue,this.cleanAttributes=cleanUnusedAttributes,this.clearAllAttributes=clearAttributes,this.clearPromotions=clearPromotions,this.addChangeValue=addAttributesChangeValue,this.addPromotion=addPromotion,this.addPromotionElement=addPromotionElement,this.getPromotionProductsEligibleForPromotionValue=promotionProductsEligibleForPromotionValue,this.getPromotionCouponCodeRequiredValue=promotionCouponCodeRequiredValue,this.deletePromotion=deletePromotion,this.duplicatePromotion=duplicatePromotion}function FeedAttribute(t,e,i,r,a,s,u,o,n){this.rowId=t,this.fieldName=e,this.advisedSource=i,this.value=r,this.fieldLevel=a,this.isActive=s,this.nrQueries=u,this.nrValueEdits=o,this.nrValueConditions=n}function CategoryMap(t,e){this.shopCategoryId=t,this.feedCategories=e}function addAttributeToFeed(t,e,i,r,a,s,u,o,n){var h=this.attributes.find(t=>t.fieldName===e);h&&this.removeAttribute(h.rowId);var l=new FeedAttribute(t,e,i,r,a,s,u,o,n);this.attributes.push(l)}function removeAttributeFromFeed(t){for(var e=0;e<this.attributes.length;e++)this.attributes[e].rowId===t&&this.attributes.splice(e,1)}function mapACategory(t,e){var i=t.match(/(\d+)$/)[0],r=t.replace("_"+i,"").match(/(\d+)$/)[0],a=JSON.parse(this.categoryMapping),s=jQuery.grep(a,function(t){return t.shopCategoryId===r});if(s.length>0){var u=s[0].feedCategories;s[0].feedCategories=wppfm_addNewItemToCategoryString(i,u,e," > ")}else{var o=new CategoryMap;o.shopCategoryId=r,o.feedCategories=e,a.push(o)}this.categoryMapping=JSON.stringify(a)}function changeCustomCategoryMap(t,e){var i=JSON.parse(this.categoryMapping),r=jQuery.grep(i,function(e){return e.shopCategoryId===t});if(r.length>0)r[0].feedCategories=e;else{var a=new CategoryMap;a.shopCategoryId=t,a.feedCategories=e,i.push(a)}this.categoryMapping=JSON.stringify(i)}function changeIncludeVariationsValue(t){this.includeVariations=t?"1":"0"}function changeAggregatorValue(t){this.isAggregator=t?"1":"0"}function changeGoogleAnalyticsSelection(t){this.googleAnalytics=t?1:0}function activateCategoryMap(t,e){var i=this.categoryMapping.length>0?JSON.parse(this.categoryMapping):[];if(jQuery.grep(i,function(e){return e.shopCategoryId===t.toString()}).length<1){var r=new CategoryMap;r.shopCategoryId=t.toString(),r.feedCategories=e?"wp_ownCategory":"wp_mainCategory",i.push(r),this.categoryMapping=JSON.stringify(i)}}function deactivateCategoryMap(t){var e=this.categoryMapping.length>0?JSON.parse(this.categoryMapping):[];if(e.length>1){var i=wppfm_arrayObjectIndexOf(e,t.toString(),"shopCategoryId");e.splice(i,1),this.categoryMapping=JSON.stringify(e)}else this.categoryMapping=[]}function getAttributeId(t){if(!this.attributes)return!1;for(var e=!1,i=0;i<this.attributes.length;i++)if(this.attributes[i].fieldName===t){e=this.attributes[i].rowId;break}return!1===e&&(e=this.attributes.length),e}function setAttributesStaticValue(t,e,i,r){var a=this.attributes[t].value;this.attributes[t].value=wppfm_storeSourceValue(e,a,"static",r),this.attributes[t].isActive=!!this.attributes[t].value}function setAttributesSourceValue(t,e,i){var r=this.attributes[t].value;this.attributes[t].value=wppfm_storeSourceValue(e,r,"source",i)}function setAlternativeAttributesSourceValue(t,e,i){var r={},a=[];if(this.attributes[t].value)(r=JSON.parse(this.attributes[t].value)).a=addOrRemoveValueInValueString(r.a,i,e,"add");else{var s={};s[1]=i,a.push(s),r.a=a}this.attributes[t].value=JSON.stringify(r)}function setAttributesCombinedOutputValue(t,e,i){var r=this.attributes[t].value;this.attributes[t].value=wppfm_storeCombinedValue(e,r,i)}function getAttributesCombinedOutputValue(t,e){var i=this.attributes[t].value?JSON.parse(this.attributes[t].value):{};return i&&i.m&&i.m[e]&&i.m[e].s&&i.m[e].s.f?i.m[e].s.f:""}function removeAttributesCombinedOutputValue(t,e,i){var r=this.attributes[t].value;this.attributes[t].value=wppfm_removeCombinedValue(e,i,r)}function countAttributesCombinedFields(t){if(this.attributes[t].value){var e=JSON.parse(this.attributes[t].value);return e.hasOwnProperty("f")?wppfm_countObjectItems(e.f):0}return 0}function setAttributesCategoryValue(t,e){var i=this.attributes[t].value;this.attributes[t].value=wppfm_storeSourceValue(0,i,"",e)}function rstNrQueries(t){this.attributes[t].nrQueries=0}function addNrQueries(t){var e=this.attributes[t].nrQueries;this.attributes[t].nrQueries=e+1}function substrNrQueries(t){var e=this.attributes[t].nrQueries;e>0&&(this.attributes[t].nrQueries=e-1)}function addAttributesChangeValue(t,e,i,r){var a=this.attributes[t].value;this.attributes[t].value=wppfm_storeValueChange(e,i,r,"add",a)}function addAttributesCondition(t,e,i,r){var a=this.attributes[t].value;this.attributes[t].value=wppfm_storeConditionValue(i,r,a,e)}function addAttributesValueQuery(t,e,i,r){var a=this.attributes[t].value;this.attributes[t].value=wppfm_storeQueryValue(e,i,a,r)}function setFeedFilterValue(t){this.feedFilter=t}function setPromotionInputValue(t,e){}function setPromotionSelectValue(t,e){}function removeFeedFilterValue(t){this.feedFilter=removeFeedFilterLevel(this.feedFilter,t)}function removeAttributesCondition(t,e,i){var r=this.attributes[t].value;this.attributes[t].value=wppfm_removeConditionValue(e,i,r)}function removeAttributesValueQuery(t,e,i){var r=this.attributes[t].value;this.attributes[t].value=wppfm_removeQueryValue(e,i,r)}function removeAttributesEditValue(t,e,i){var r=this.attributes[t].value;this.attributes[t].value=wppfm_removeEditValuesValue(e,i,r)}function removeAlternativeSource(t,e){var i={};this.attributes[t].value&&((i=JSON.parse(this.attributes[t].value)).a=addOrRemoveValueInValueString(i.a,"",e,"remove"),i.a||delete i.a,this.attributes[t].value=JSON.stringify(i))}function getAttributesQueries(t,e){var i=this.attributes[t].value,r={};if(i){var a=JSON.parse(i);a&&a.hasOwnProperty("m")&&a.m[e]&&a.m[e].hasOwnProperty("c")&&a.m[e].c.length>0&&(r=a.m[e].c)}return r}function getAttributesValueQueries(t,e){var i=this.attributes[t].value,r={};if(i){var a=JSON.parse(i);a&&a.v&&a.v[e]&&a.v[e].hasOwnProperty("q")&&a.v[e].q.length>0&&(r=a.v[e].q)}return r}function getAttributesValues(t){var e=this.attributes[t].value,i={};if(e){var r=JSON.parse(e);r&&"v"in r&&r.v.length>0&&(i=r.v)}return i}function getFeedFilterValue(t){}function getAlternativeSources(t){var e=this.attributes[t].value,i={};if(e){var r=JSON.parse(e);r&&"a"in r&&r.a.length>0&&(i=r.a)}return i}function getSourceData(t){var e={};e.rowId=t,e.fieldName=this.attributes[t].fieldName,e.advisedSource=this.attributes[t].advisedSource;var i=this.attributes[t].value;if(i){var r=JSON.parse(i);e.mapping=r&&"m"in r?r.m:[],e.changeValues=r&&"v"in r?r.v:[],e.customCondition=!(!r||!("t"in r))}else e.mapping=[],e.changeValues=[],e.customCondition=!1;return e}function getAttributesSources(t){var e=this.attributes[t].value,i={};if(e){var r=JSON.parse(e);r&&"s"in r&&(i=r.s)}return i}function addOrRemoveValueInValueString(t,e,i,r){var a=t||[];if("add"===r){var s={},u="";s[i]=e,a[i-1]&&"q"in a[i-1]&&(u=a[i-1].q),i in s&&a.splice(i-1,1),u&&(s.q=u),a.push(s)}else a.splice(i-1,1),a=wppfm_resortObject(a);return wppfm_countObjectItems(a)>0?a:""}function clearAttributesSourceValue(t,e){this.attributes[t].value?this.attributes[t].value=wppfm_storeSourceValue(e,this.attributes[t].value,"clear",""):this.attributes[t].value=""}function setFeedCustomCategory(t,e){this.attributes,this.mainCategory=e;var i=t||getCustomCategoryAttributeId(this.attributes,e);if(i){var r=this.attributes[i].value?JSON.parse(this.attributes[i].value):{};r.t=e,this.attributes[i].value=JSON.stringify(r)}}function changeCountry(t){this.country=t}function getCustomCategoryAttributeId(t){for(var e=0;e<t.length;e++){if(t[e],(t[e].value?JSON.parse(t[e].value):{}).hasOwnProperty("t"))return e}}function setCategories(t,e,i){if(void 0!==this.attributes[3]){var r=this.attributes[3].value?JSON.parse(this.attributes[3].value):{},a=wppfm_category_separator(i),s=this.mainCategory,u=void 0!==this.attributes[3].value?s.split(a).length:0,o=t.match(/(\d+)$/)[0];if("0"===o)this.mainCategory=e,this.attributes[3].value='{"t":"'+e+'"}';else if(u<=o)this.mainCategory+=a+e,this.attributes[3].value='{"t":"'+r.t+a+e+'"}';else{for(var n=0,h=0;h<o;h++)n=s.indexOf(a,n+1);s=s.substring(0,n),"0"!==e?(this.mainCategory=s+a+e,this.attributes[3].value='{"t":"'+s+a+e+'"}'):(this.mainCategory=s,this.attributes[3].value='{"t":"'+s+'"}')}}}function setSchedule(t,e,i,r){this.updateSchedule=t+":"+e+":"+i+":"+r}function activateFeedsAttribute(t){this.attributes[t].isActive=!0}function deactivateFeedsAttribute(t){if("1"!==this.attributes[t].fieldLevel){var e=this.attributes[t].value?JSON.parse(this.attributes[t].value):{};this.attributes[t].isActive=!1,e&&!1 in e&&(this.attributes[t].value="")}else this.attributes[t].isActive=!0}function checkCustomName(t){for(var e=!1,i=0;i<this.attributes.length;i++)this.attributes[i].fieldName===t&&(e=!0);return e}function getFeedType(){return this.feedType}function removeAttribute(t){this.attributes.splice(t,1)}function cleanUnusedAttributes(){if(this.attributes.length>0)for(var t=0;t<this.attributes.length;t++)(!0!==this.attributes[t].isActive||void 0===this.attributes[t].advisedSource&&""===this.attributes[t].value)&&(this.attributes.splice(t,1),t--)}function clearAttributes(){this.attributes=[]}function addPromotion(t=[]){return this.promotions.push(t)}function addPromotionElement(t,e,i){this.promotions.length<=t&&this.promotions.push([]);var r=this.promotions[t].findIndex(t=>t.meta_key===e);if(-1!==r&&this.promotions[t].splice(r,1),i){var a={};a.meta_key=e,a.meta_value=i,this.promotions[t].push(a)}}function deletePromotion(t){this.promotions.splice(t,1);for(var e=0;e<this.promotions.length;e++)this.promotions[e][0].meta_value=e}function duplicatePromotion(t){var e=jQuery.extend(!0,[],this.promotions[t]);e[0].meta_value=this.promotions.length,this.promotions.push(e)}function clearPromotions(){this.promotions=[]}function promotionProductsEligibleForPromotionValue(t){for(var e=0;e<this.promotions[t].length;e++)if("product_applicability"===this.promotions[t][e].meta_key)return this.promotions[t][e].meta_value;return""}function promotionCouponCodeRequiredValue(t){for(var e=0;e<this.promotions[t].length;e++)if("offer_type"===this.promotions[t][e].meta_key)return this.promotions[t][e].meta_value;return""}